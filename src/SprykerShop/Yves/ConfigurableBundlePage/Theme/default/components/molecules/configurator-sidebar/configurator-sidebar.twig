{% extends model('component') %}

{% define config = {
    name: 'configurator-sidebar',
    tag: 'ul',
} %}

{% define data = {
    form: required,
    configurableBundleTemplateStorage: required,
    isSummaryPageUnlocked: required,
    selectedSlotId: '',
    isSummaryPage: false,
} %}

{%- block extraClass %} spacing-left spacing-top{% endblock -%}

{% block body %}
    {% for configurableBundleTemplateSlotStorage in data.configurableBundleTemplateStorage.slots %}
        {% block slot %}
            <li class="{% block slotClasses %}{% endblock %}">
                {% block slotInner %}
                    {% include molecule('configurator-state-form', 'ConfigurableBundlePage') with {
                        data: {
                            form: data.form.createView,
                            submitButtonText: configurableBundleTemplateSlotStorage.name | trans,
                            idConfigurableBundleTemplateSlot: configurableBundleTemplateSlotStorage.idConfigurableBundleTemplateSlot,
                            selectedSlotId: data.selectedSlotId,
                            submitButtonClass: 'button button--expand button--big-spaces',
                            isExtraClass: true,
                            action: path(
                                'configurable-bundle/configurator/slots', {
                                    'idConfigurableBundleTemplate': data.configurableBundleTemplateStorage.idConfigurableBundleTemplate,
                                    'idConfigurableBundleTemplateSlot': configurableBundleTemplateSlotStorage.idConfigurableBundleTemplateSlot,
                                }
                            ),
                        },
                    } only %}
                {% endblock %}
            </li>
        {% endblock %}
    {% endfor %}
    {% block summary %}
        <li class="{% block summaryClasses %}{% endblock %}">
            {% block summaryInner %}
                {% set summaryButtonExtraClass = data.isSummaryPage ? ' button--active' : ' button--unselected' %}
                {% set summaryButtonClasses = 'button button--expand button--big-spaces' ~ summaryButtonExtraClass %}

                {% include molecule('configurator-state-form', 'ConfigurableBundlePage') with {
                    data: {
                        form: data.form.createView,
                        submitButtonText: 'configurable_bundle_page.configurator.summary' | trans,
                        isSubmitButtonActive: data.isSummaryPageUnlocked,
                        submitButtonClass: summaryButtonClasses,
                        isExtraClass: false,
                        isSummary: true,
                        action: path(
                            'configurable-bundle/configurator/summary', {
                                'idConfigurableBundleTemplate': data.configurableBundleTemplateStorage.idConfigurableBundleTemplate,
                            }
                        ),
                    },
                } only %}
            {% endblock %}
        </li>
    {% endblock %}
{% endblock %}
